import picostdlib/[gpio, i2c]
import pico_ssd1306


proc hello() =
  setupI2c(i2c1, 26.Gpio, 27.Gpio, 200000)
  var disp = createDisplay(i2c1, 128, 64, 0x3C, false)
  disp.drawString((1.uint, 0.uint), "Hello World")
  disp.drawLine((2.uint, 8.uint), (120.uint, 8.uint))

  # this is like a clock or something
  let data: array[128, uint8] = [0x00, 0xF8, 0x1F, 0x00, 0x00, 0xF8, 0x1F, 0x00, 0x80, 0x07, 0xE0, 0x01, 0x80, 0x07, 0xC0, 0x03, 0x20, 0x00, 0x00, 0x04, 0x30, 0x00, 0x00, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x00, 0x00, 0x30, 0x0C, 0x00, 0x00, 0x30, 0x0C, 0x80, 0x01, 0x30, 0x0C, 0x80, 0x01, 0x30, 0x03, 0x80, 0x01, 0xC0, 0x03, 0x80, 0x01, 0xC0, 0x03, 0x80, 0x01, 0xC0, 0x03, 0x80, 0x01, 0xC0, 0x03, 0x80, 0x01, 0xC0,0x03, 0x80, 0x01, 0xC0, 0x03, 0x80, 0x01, 0xC0, 0x03, 0x80, 0x01, 0xC0, 0x03, 0x00, 0x00, 0xC0, 0x03, 0x00, 0x00, 0xC0, 0x04, 0x00, 0x00, 0x20, 0x0C, 0x00, 0x00, 0x30, 0x0C, 0x00, 0x00, 0x30, 0x0C, 0x00, 0x00, 0x30, 0x08, 0x00, 0x00, 0x10, 0x30, 0x00, 0x00, 0x0C, 0x20, 0x00, 0x00, 0x04, 0x80, 0x07, 0xC0, 0x03, 0x80, 0x07, 0xE0, 0x01, 0x00, 0xF8, 0x1F, 0x00, 0x00, 0xF8, 0x1F, 0x00]
  disp.drawImage(@data, (20.uint, 20.uint), 32, 32)

  disp.drawRect((64.uint, 20.uint), (96.uint, 52.uint))

  disp.show()
  
  
hello()

